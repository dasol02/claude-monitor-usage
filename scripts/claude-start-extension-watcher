#!/bin/bash
# Extension Watcherë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹œì‘
# ì‚¬ìš©ë²•: claude-start-extension-watcher

# ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
if pgrep -f "claude-extension-watcher" > /dev/null; then
    echo "âœ… Extension watcher already running"
    ps aux | grep -E "claude-extension-watcher" | grep -v grep
    exit 0
fi

# ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰
nohup "$HOME/.local/bin/claude-extension-watcher" > /dev/null 2>&1 &

sleep 2

if pgrep -f "claude-extension-watcher" > /dev/null; then
    echo "âœ… Extension watcher started!"
    echo ""
    echo "ğŸ“Š Now Chrome Extension will auto-sync to SwiftBar"
    echo "   Just click 'Scrape Now' in the extension"
    echo ""
    echo "ğŸ” Check logs: tail -f /tmp/claude-extension-watcher.log"
    echo "ğŸ›‘ Stop: killall claude-extension-watcher"
else
    echo "âŒ Failed to start watcher"
    exit 1
fi
